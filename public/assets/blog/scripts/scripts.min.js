"use strict";!function(o,n,e){o.mod={},e(function(){o.mod.common=new o.mod.common;var n=e("body").attr("class").split(" ");e.each(n,function(n,e){e=e.replace(/[-]/g,""),void 0!==o.mod[e]&&(o.mod[e]=new o.mod[e])})})}(window,document,jQuery),window.mod.common=function(){var o=function(){console.log("[brz] begin common.js"),window.mod.navbar=new window.mod.navbar,window.mod.slidemenu=new window.mod.slidemenu,window.mod.search=new window.mod.search,window.mod.tags=new window.mod.tags,n()},n=function(){0==document.getElementsByClassName("homes").length&&$(".Navbar").addClass("u-fixed")};o()},window.mod.homes=function(){var o=function(){console.log("[brz] begin homes.js"),window.mod.slide=new window.mod.slide,window.mod.promo=new window.mod.promo,n()},n=function(){$(".Home-next").click(function(){$("html, body").animate({scrollTop:$(".Navbar").offset().top},800)})};o()},window.mod.navbar=function(){var o=function(){console.log("[brz] begin navbar.js"),n()},n=function(){var o,n=0,e=5,a=$(".Navbar").outerHeight();$(window).scroll(function(n){o=!0}),setInterval(function(){if(o){var s=$(this).scrollTop();if(Math.abs(n-s)<=e)return;s>n&&s>a?$(".Navbar").removeClass("Navbar-down").addClass("Navbar-up"):s+$(window).height()<$(document).height()&&$(".Navbar").removeClass("Navbar-up").addClass("Navbar-down"),document.getElementsByClassName("homes").length>0&&(s>$(window).height()?($(".Navbar").addClass("u-fixed"),$(".Content--postsHome").removeClass("u-p-t-50").addClass("u-p-t-200")):($(".Navbar").removeClass("u-fixed"),$(".Content--postsHome").removeClass("u-p-t-200").addClass("u-p-t-50"))),n=s,o=!1}},1e3)};o()},window.mod.posts=function(){var o=function(){console.log("[brz] begin posts.js"),window.mod.share=new window.mod.share,window.mod.rating=new window.mod.rating};o()},window.mod.promo=function(){var o=this,n=function(){console.log("[brz] begin promo.js"),e()};o.openPromo=function(){$("body").addClass("hasOpenMenu"),$(".Promo").addClass("active"),a()},o.closePromo=function(){$("body").removeClass("hasOpenMenu"),$(".Promo").removeClass("active")};var e=function(){o.openPromo(),$(".Promo-close").click(function(){o.closePromo()}),o.openForm()};o.openForm=function(){$(".Promo-download").click(function(n){n.preventDefault(),$(".Promo-logo").addClass("center-block").fadeIn(1500),$(".Promo-cta").removeClass("active").fadeIn(1500),$(".Promo-form").addClass("active").fadeIn(1500),o.sendForm()})},o.sendForm=function(){$(".Promo-form").on("submit",function(n){n.preventDefault(),$(".Promo-form .Promo-button").html("Enviando...");var e={name:$("#name").val(),email:$("#email").val()};$.ajax({type:"POST",headers:{"X-CSRF-Token":$("#token").val()},url:"/conversao/enviar",data:e,async:!1,dataType:"json",success:function(n){$(".Promo-formValidate").text(""),alert(n.message),o.closePromo(),window.open(n.redirect)},error:function(o){setTimeout(function(){$(".Promo-form .Promo-button").text("Enviar")},1e3),$(".Promo-formValidate").text(""),$.each(o.responseJSON.errors,function(o,n){var e=".Promo-form input[name="+o+"]";$(e+"+span").text(n)})}})})};var a=function(){$(document).bind("keydown.closePromo",function(n){27==n.which&&(n.preventDefault(),o.closePromo(),s())})},s=function(){$(document).unbind("keyup.closePromo")};n()},window.mod.rating=function(){var o=function(){console.log("[brz] begin rating.js"),n()},n=function(){a(),e(),t()},e=function(){$(".Rating-stars").hover(function(){$(this).prevAll().andSelf().addClass("Icon--starfillBefore"),$(this).nextAll().removeClass("Icon--starfillBefore").addClass("Icon--starBefore")},function(){$(this).prevAll().andSelf().removeClass("Icon--starfillBefore"),s($(this).parent())})},a=function(o){$(".Rating").each(function(o){var n=$(this),e={id:n.data("id")};$.post({headers:{"X-CSRF-Token":n.data("token")},url:"/avaliacoes/nota",data:e,dataType:"json",success:function(o){$(n).data("rating",o.data),s(n)},error:function(o){alert(o.responseJSON.message)}})})},s=function(o){var n=$(o).data("rating").avr;$(o).data("rating").rtp,$(o).data("rating").total;$(o).find(".Rating-stars--"+n).prevAll().andSelf().addClass("Icon--starfillBefore").removeClass("Icon--starBefore"),$(o).find(".Rating-stars--"+n).nextAll().removeClass("Icon--starfillBefore").addClass("Icon--starBefore")},t=function(){$(".Rating-stars").click(function(){var o=$(this),n=$(this).parent(),e={id:n.data("id"),value:$(o).data("value")};$.post({headers:{"X-CSRF-Token":n.data("token")},url:"/avaliacoes/avaliar",data:e,dataType:"json",success:function(o){$(n).data("rating",o.data),s(n)},error:function(o){alert(o.responseJSON.message)}})})};o()},window.mod.search=function(){var o=this,n=function(){console.log("[brz] begin search.js"),e(),i()};o.openSearch=function(){$("body").addClass("hasOpenMenu"),$(".Search").addClass("active"),$("#searchInput").focus(),a()},o.closeSearch=function(){$("body").removeClass("hasOpenMenu"),$(".Search").removeClass("active")};var e=function(){$(".Search-open").click(function(){o.openSearch()}),$(".Search-close").click(function(){o.closeSearch()})},a=function(){$(document).bind("keydown.closeSearch",function(n){27==n.which&&(n.preventDefault(),o.closeSearch(),s())})},s=function(){$(document).unbind("keyup.closeSearch")},t=function(){var o=$("#searchInput").val();return""!==o&&$.ajax({type:"GET",url:"/posts/buscar",data:{q:o},success:function(o){$("#post-results").html(o)}}),!1},i=function(){$("#searchForm").submit(!1),$("#searchInput").on("keyup",function(o){clearTimeout($.data(this,"timer"));var n=$(this).val();n.length<3?$("#post-results").fadeOut():($("#post-results").fadeIn(),$(this).data("timer",setTimeout(t,100)))})};n()},window.mod.share=function(){var o=function(){console.log("[brz] begin share.js"),n()},n=function(){$(".Share-link").click(function(o){o.preventDefault();var n,e=$(this),a=e.data("url"),s=e.data("title");e.hasClass("twitter")?n="https://twitter.com/intent/tweet?url="+a+"&text="+s+"&wrap_links=true":e.hasClass("facebook")?n="https://www.facebook.com/sharer/sharer.php?u="+a:e.hasClass("googleplus")&&(n="https://plus.google.com/share?url="+a),window.open(n,"_blank")})};o()},window.mod.slide=function(){var o,n,e,a,s,t,i=function(){console.log("[brz] begin slide.js"),c()},r=4,c=function(){$(".Home-slidershow").owlCarousel({loop:!0,animateOut:"fadeOut",items:1,nav:!1,dots:!0,mouseDrag:!1,dotsContainer:".Home-sliderDots",onInitialized:l,onTranslate:f,onDrag:m})},l=function(){n=$("<div>",{"class":"Home-sliderBar hidden-xs"}),o=$("<div>",{"class":"Home-sliderProgressBar"}),e=$("<div>",{"class":"Home-sliderBarLoading"}),o.append(e),n.append(o).prependTo($(".Home-slidershow")),d()},d=function(){t=0,a=!1,s=setInterval(u,10)},u=function(){a===!1&&(t+=1/r,e.css({width:t+"%"}),t>=100&&($(".Home-slidershow").trigger("next.owl.carousel"),t=0))},m=function(){a=!0},f=function(){clearTimeout(s),d()};i()},window.mod.slidemenu=function(){var o=this,n=function(){console.log("[brz] begin slidemenu.js"),e()},e=function(){$(".SlideMenu-open").click(o.openMenu),$(".SlideMenu-close").click(o.closeMenu),$(".MenuMask").click(o.closeMenu)};o.closeMenu=function(){console.log("[brz] closing menu"),$(".SlideMenu").removeClass("active"),$(".MenuMask").removeClass("active"),$("body").removeClass("hasOpenMenu")},o.openMenu=function(){$(".SlideMenu").addClass("active"),$(".MenuMask").addClass("active"),$("body").addClass("hasOpenMenu"),a()};var a=function(){$(document).on("keyup.closeMenu",function(n){27===n.which&&(console.log("[brz] pressing esc"),o.closeMenu(),s())})},s=function(){$(document).unbind("keyup.closeMenu")};n()},window.mod.tags=function(){var o=this,n=function(){console.log("[brz] begin tags.js"),e()};o.openTags=function(){$("body").addClass("hasOpenMenu"),$(".Tags").addClass("active"),a()},o.closeTags=function(){$("body").removeClass("hasOpenMenu"),$(".Tags").removeClass("active")};var e=function(){$(".Tags-open").click(function(){o.openTags()}),$(".Tags-close").click(function(){o.closeTags()})},a=function(){$(document).bind("keydown.closeTags",function(n){27==n.which&&(n.preventDefault(),o.closeTags(),s())})},s=function(){$(document).unbind("keyup.closeTags")};n()};